IET Energy Systems Integration Research Article Battery super-capacitor hybrid system for electrical vehicle transportation's systems an energy integrated approach eISSN 2516-8401 Received on 13th February 2020 Revised 21st March 2020 Accepted on 7th April 2020 doi: 10.1049/iet-esi.2020.0022 www.ietdl.org Madan Mohan Rayguru1, Sreedhar Madichetty2 , Sukumar Mishra3 1Engineering Product Development Pillar, Singapore University of Technology & Design, Singapore 2Electrical and Electronics Engineering, Mahindra Ecole Centrale, Hyderabad, Telangana, India 3Electrical Engineering, Indian Institute of Technology Delhi, New Delhi, India E-mail: sreedhar.803@gmail.com Abstract: Hybrid energy storage system (HESS) generally comprises of two different energy sources combined with power electronic converters. This article uses a battery super-capacitor based HESS with an adaptive tracking control strategy. The proposed control strategy is to preserve battery life, while operating at transient conditions of the load. The proposed control strategy comprises of a gain adaptation algorithm, combined with a dead-zone induced feedback. The closed loop system under the influence of this feedback scheme, is proved to be is robust against variation in operating conditions, parameter uncertainties and measurement noise. Unlike the earlier adaptive controllers for HESS, this strategy does not involve any parameter adaptation routine. Hence, this controller is computationally less intensive and better suited for practical applications involving uncertain environmental conditions. The efficacy of the proposed strategy is verified through numerical simulations and experimental scenarios. 1 Introduction HESS devices have become very essential components of numerous applications involving electric vehicles, renewable energy based operations, energy storing devices etc [1 5]. A HESS consists of two types of energy sources with different power densities. The main energy source is generally a battery, which can supply a slow varying power demand on the long period of time. A super-capacitor or ultra-capacitor is used as the alternate source, which can supply short burst of energy in a small time interval to deal with fast variations in power demand. The two energy sources can be connected to a common supply bus in a passive or active manner. The main requirement of HESS is to provide a stable power and energy supply for the concerned application. Numerous topologies like passive, semi-active, active interconnection strategies have been proposed, so that a HESS could maintain the output power/ energy amid the load variations [4, 5]. As the main power source is controlled through a separate controller, an active interconnection of the battery-super-capacitor through a bi-directional converter has been shown to provide better power/ energy management, than a passive interconnection [4]. In most cases, the power/energy management of the HESS boils down to the control of a power electronic converter. A cascade controller structure is generally used to separately control the voltage and current of the concerned converter. The outer voltage loop decides the total current need, which has to be drawn/supplied from the power sources. Depending on the direction of the current, the operational source is determined to be in a charging or discharging mode. One important aspect of the effective power management in HESS is the selection of a strategy to allocate a particular source to cater a specific current/power demand. For example, a super- capacitor can be effective in dealing with sudden surges of power demand, but may not be suitable for catering an average power demand for a longer period of time. Similarly, a battery may be suitable for supplying a steady current for longer period of time, but can not deal with fast changes in power demand. Therefore, it is important to allocate the correct source under different load changes. Various strategies have been successfully developed and applied in this direction. The authors of [6] proposed three different methodologies to determine the battery and super-capacitor reference currents, depending on a predefined current ratio. The works presented in [7], derives the reference battery current from the average voltage/power demand and manipulate the transient part of the total demand to determine the reference super-capacitor current. In the similar line of works, the literature [8] exploited a fuzzy based rule-base to generate the reference currents for different sources. Another important aspect of HESS power management is to control the converter in such a way that, the allocated source delivers/absorbs power with satisfactory transient and steady state performance. Therefore, modeling and controller design for the power electronic converter is stressed upon in many works [7, 9, 10]. The averaged state space model and transfer functions concerning the input-output dynamics of the converter can be derived using small signal analysis method [3, 11]. The controller for the obtained model, can be designed in a multiple number of ways depending on the requirement. Proportional-Integral (PI) feedback scheme is the most common method for voltage and current control of HESS, due to its simplicity and suitability for practical implementations [7]. The optimal control methods like LQR, LQG are also effective when the cost function for the optimization routine is known [9, 10, 12]. In most of the cases, the dynamics of energy sources (battery, super-capacitors) are not fully known. Moreover, the presence of measurement noise and parasitic components contribute to the uncertainty present in the system dynamics. Hence, certain robust and adaptive controllers are utilized to guarantee satisfactory performance. The uncertainty handling properties of fuzzy controllers, makes them attractive choices for this task [8]. In another line of research, adaptive controllers like model predictive controller (MPC), adaptive back-stepping are used to carry out the same task [13, 14]. Even though the existing robust and adaptive are effective in assuring the required performance of HESS, they require certain knowledge about the system dynamics. The fuzzy controllers requires a rule base for the decision making and these rules may vary with different operating conditions. The MPC controllers and adaptive back-stepping require the nominal part of the system dynamics to be known and the constraints need to be well defined. Moreover, these controllers require computationally intensive routines to synthesize the stabilizing feedback. IET Energy Syst. Integr. This is an open access article published by the IET and Tianjin University under the Creative Commons Attribution License (http://creativecommons.org/licenses/by/3.0/) 1 25168401, 2020, 3, Downloaded from https://ietresearch.onlinelibrary.wiley.com/doi/10.1049/iet-esi.2020.0022, Wiley Online Library on [19/02/2023]. See the Terms and Conditions (https://onlinelibrary.wiley.com/terms-and-conditions) on Wiley Online Library for rules of use; OA articles are governed by the applicable Creative Commons License Therefore, there is a need of an adaptive or a robust methodology, which involves less computation and suitable for practical implementation. Non-identifier based adaptive controllers [15] are well known for their simplicity in implementation and robustness against various classes of uncertainties. The high gain adaptive controller design proposed in [15] may achieve a satisfactory performance, but is prone to measurement noise. The funnel controller [16, 17] and tracking controller do not have such limitations are perform efficiently in uncertain environment. This work intends to use tracking controllers [16, 18] for handling the cascade feedback loop (voltage and current control loops) of power electronic converters. The controller does not require any parameter of the system dynamics except the relative degree of the system to be known a priori [15]. By using the error feedback, the control law updates the controller gain and thereby directly effecting the control law. No parameter adaptation algorithm or rule base is used, which can be computationally intensive. The controller is shown to be robust against various classes of uncertainties like change in operating conditions, presence of measurement noise and un-modeled dynamics. 2 HESS description This work considers a parallel architecture for the HESS, which consists of two different power sources. The battery and super- capacitor (which act as the energy sources) are connected in parallel with a bi-directional DC/DC converter, which in turn connected to the output dc bus. The desired output voltage (Vdes) is generally decided a priori and the HESS should be controlled in such a way that the regulation error converges to zero, i.e. Vout Vdes 0. Generally, a cascaded controller architecture comprising of outer voltage loop and inner current loop (see Fig. 1), is used to achieve this task. The outer voltage loop decides the total current demand/supply (Iref) from the discrepancy between desired output voltage and measured output voltage. In the next step, the total current demand is exploited to derive the reference currents (Ibr, Isr) for the two sources. The inner current control loop assures the regulation of source currents Ibat, Icap to their reference values. There are many efficient ways to design the reference current generator [7, 8, 11]. However, This paper uses the same technique proposed in [7], for its efficient allocation of the correct power source for different load demands. As described in [7], the total current demand is filtered out and the low frequency component is fed to converter as battery reference current. The super-capacitor reference current is determined from the high frequency component of Itot ref. 2.1 System dynamics and controller design The circuit diagram of the concerned HESS system is shown in Fig. 2. The averaged model for the above circuit can be derived as given in [7, 11]. The dynamics of the variation in currents for battery (I ~ bat) and super-capacitor (I ~ cap) can be expressed as: I ~ bat = Rb Lb I ~ bat 1 Db Lb V ~ out + Vout Lb d ~ b + 1 LbV ~ b (1) I ~ cap = Rc Lc I ~ cap 1 Dc Lc V ~ out + Vout Lc d ~ c + 1 LcV ~ c (2) where Db, Dc represent the nominal duty ratios for the battery and super-capacitor, d ~ b, d ~ c represent the variation in duty cycles, V ~ b, V ~ c represent the variation in battery and supercapacitor voltage, Rb, Rc are the resistance parameters and Lb, Lc are the inductance parameters. The variation in the duty ratios d ~ b and d ~ c act as the control input for battery and supercapacitor respectively. It can be noted that, the current dynamics of the power sources are dependent on the variation in source voltages, which may vary with state of charge (SOC). The nominal operating conditions (Vout, Db, Dc) may change for different requirements. Similarly, the resistances and inductances may vary during temperature variations Fig. 1 System with existing control scheme (dotted) and proposed control scheme Fig. 2 Complete circuit of battery super-capacitor system 2 IET Energy Syst. Integr. This is an open access article published by the IET and Tianjin University under the Creative Commons Attribution License (http://creativecommons.org/licenses/by/3.0/) 25168401, 2020, 3, Downloaded from https://ietresearch.onlinelibrary.wiley.com/doi/10.1049/iet-esi.2020.0022, Wiley Online Library on [19/02/2023]. See the Terms and Conditions (https://onlinelibrary.wiley.com/terms-and-conditions) on Wiley Online Library for rules of use; OA articles are governed by the applicable Creative Commons License or change in environmental conditions. Therefore, it can be conclude that the current dynamics presented in (1) and (2) are generally uncertain in nature. Even if the current control loop provides an effective regulation of currents, the outer voltage loop is essential for maintaining the desired output voltage. The voltage loop is generally the outer loop which generates the total current reference. The output of the voltage controller pass through the current loop before effecting the voltage dynamics as shown in Fig. 1. Therefore, the voltage dynamics is uncertain and may be represented as: V ~ out = 1 Db C I ~ bat + 1 Dc C I ~ cap 1 CIbatd ~ b 1 CIcapd ~ c 1 CIload . (3) As the dynamics of I ~ bat and I ~ cap are uncertain, (3) is also an uncertain dynamics. The following assumptions are required to develop a feasible tracking adaptive control law. Assumption 1: The dynamics (1), (2) are globally Lipschitz in their arguments. Assumption 1: The dynamics (1), (2) have relative degree one. Assumption 1 is less conservative from the earlier design methods in the sense that, the dynamics can be nonlinear in nature. The non-linearity may come from parasitic elements in the converter or non-linearity associated with battery and SC. For nominal linear dynamics, as presented in earlier literature [6, 7, 11], this assumption is automatically satisfied. In linear systems, the relative degree is analogous to the difference between the order of the numerator polynomial and denominator polynomial for a transfer function. As the transfer functions (Ibat(s)/d ~ b(s), Icap(s)/d ~ c(s), Vout(s)/d ~ c(s)) presented in existing literature [7, 9, 10] satisfy relative degree one, this assumption is not necessary for nominal linear cases. However, this paper intends to propose an adaptive controller, which can deal with various uncertainties and therefore, the dynamic models need to satisfy the assumption II. 3 tracking control law The variation in currents and output voltage presented in (1) (3) can be expressed in a single input and single output (SISO) nonlinear form as: y = f (y, yref, ) + g(y, yref, )u (4) where y is the concerned output, yref is the reference signal to be tracked, represents the uncertain elements, g(y, yref, ) 0, y, and u is the control input. The assumptions I and II hold true for (4). The general tracking control law [16] is presented in the form of a lemma below. Lemma 1: Let the SISO uncertain system in the form of (4) satisfy the assumptions I and II. For three positive numbers, , , R + and a Nussbaum function [16], let the control input is selected as: u = N(K(t))(y yref) + K = ( y yref ) y yef , when y yref 0, when y yref < . (5) Then lim t y yref . Proof: See [16] for details. 3.1 Current controllers The source currents and output voltage dynamics presented in (1) (3) can be modeled in the form of (4). The battery current dynamics (1) can be rewritten as I ~ bat = f b(I ~ bat, Ibr, V ~ out, b) + gb(Vout, b)d ~ b (6) where the term b represents the combination of unknown variables and parameters like V ~ b, Rb, Lb, Db etc, f b(I ~ bat, Ibr, Vout, b) = (Rb/Lb)I ~ bat ((1 Db)/Lb)V ~ out + (1/Lb)V ~ b and gb(Vout, b) = (Vout/Lb)d ~ b. Both the assumptions I and II are satisfied for (6). From the structure of gb( . ), it can be observed that, there exist two positive constants cb1 and cb2 such that cb1 gb(Vout, b) cb2 . (7) Without any loss of generality, it can be assumed that cb1 = 0 for this case. Hence, the Nussbaum function can be chosen as N(K(t)) = K(t). The battery current dynamics (1) can be rewritten as I ~ cap = f c(I ~ cap, Isr, V ~ out, c) + gc(Vout, c)d ~ c (8) where the term c represents the combination of unknown variables and parameters like V ~ c, Rc, Lc, Dc etc, f c(I ~ cap, Icr, Vout, c) = (Rc/Lc)I ~ cap ((1 Dc)/Lc)V ~ out + (1/Lc)V ~ c and gc(Vout, c) = (Vout/Lc)d ~cb. Both the assumptions I and II are satisfied for (8). From the structure of gc( . ), it can be observed that, there exist two positive constants cc1 and cc2 such that cc1 gc(Vout, c) cc2 . (9) Without any loss of generality, it can be assumed that cc1 = 0 for this case. Hence, the Nussbaum function can be chosen as N(K(t)) = K(t) [16]. The battery and supercapacitor current controllers are chosen to be in the following form, d ~ b = Kb(t)(Ibat Ibr) + b b( Ibat Ibr b) Ibat Ibr , K b = when Ibat Ibr b; 0, when Ibat Ibr < b . (10) d ~ c = Kc(t)(Icap Icr) + c c( Icap Icr c) Icap Icr , K c = when Icap Icr c; 0, when Icap Icr < c . (11) where b, b, b, c, c, c R +. The main result of this paper is summarized in the following theorem. Theorem 1: Let the battery and supercapacitor current dynamics (1), (2) satisfy the assumptions I and II. For six positive numbers b, b, b, c, c, c R +, let the control inputs are selected as given in (10) and (11), then lim t Ibat Ibr b . lim t Icap Icr c . Proof: As the structure of the current controllers for battery and super-capacitor are similar, the arguments of the proof will be same as mentioned. The convergence result for the current control law is provided in the Appendix. IET Energy Syst. Integr. This is an open access article published by the IET and Tianjin University under the Creative Commons Attribution License (http://creativecommons.org/licenses/by/3.0/) 3 25168401, 2020, 3, Downloaded from https://ietresearch.onlinelibrary.wiley.com/doi/10.1049/iet-esi.2020.0022, Wiley Online Library on [19/02/2023]. See the Terms and Conditions (https://onlinelibrary.wiley.com/terms-and-conditions) on Wiley Online Library for rules of use; OA articles are governed by the applicable Creative Commons License 3.2 Voltage controller Similar to the previous subsection, the voltage dynamics (3) can be expressed in the form of (4), where the uncertain elements can be clumped in the parameter . The total reference current Iref is generated through the following tracking controller. Iref = Kv(t)(Vout Vref) + v v( Vout Vref v) Vout Vref , K v = when Vout Vref v; 0, when Vout Vref < v . (12) where v, v, v R +. The arguments mentioned in Theorem 1 can be followed to assure lim t Vout Vref c . 3.3 Controller tuning (i) The controller proposed in this paper does not force the error towards zero, but towards a band defined by . In ideal environment, the parameter can be chosen to be a very small value. However, in real world applications, the sensors may not give a exact measurement. The parameter should be chosen, by taking account of the possible measurement noise in the system. (ii) The parameter decides the adaptation speed and therefore, has to be chosen carefully to avoid possible oscillation or sluggishness. Ideally, it should be inversely proportional to the principal time constant of the system. (iii) If the steady state value of feedback is known, the parameter has to be chosen as the same. This parameter helps to reduce the sensitivity of the controller towards noise. (iv) The initial value of the controller gain K(0) has to be chosen according to the size of uncertain terms. However, a large initial condition may lead to overshoot or oscillations. Analytic comparison: The LQR, LQG controllers are the family of optimal controllers. Even though they are effective, they require substantial knowledge of the systems like system matrices,to calculate the control law. However, the system matrices are not usually known completely, and the matrices change in the presence of uncertainties. So, the control law can not be computed accurately. The adaptive strategies with estimation of system parameters and control gains, may be effective in unknown dynamics cases. However, these algorithms may be computationally intensive. Contrary to the issues faced by these controllers, the proposed controller does not need any system matrices for control law synthesis, and computationally inexpensive. Moreover, the controller is robust against many uncertainties like change in SOC, noisy measurements etc. 4 Results and analysis 4.1 Simulation results and analysis The effectiveness of an adaptive strategy ( tracking),is given in comparison with the conventional PI controller.The comparison of these two schemes is based on the nominal performances and the performances in presence of various uncertainties. The nominal performance for the proposed controller and the PI controller is shown in Figs. 3 and 4 respectively. The numerical simulation is performed for a nominal model of HESS as given in [7]. From the figures, it can be observed that the conventional PI controller response to the load changes is faster compared to the proposed controller. This is due to the fact that, the PI controller uses the system information (magnitude of different system parameters are known) to tune the controller gains. However, the proposed tracking controller uses only the error signals to generate the feedback input. It can also be observed that the battery and supercapacitor currents suffer more oscillations and large overshoots with the conventional PI controller, whereas the responses are smoother with the proposed control law. This observation can be explained by the shortcoming in the PI controllers, in assuring better transient performance. To verify the efficacy of the proposed controller in presence of system uncertainties, the SOC of the battery and supercapacitors are changed (decreased to 25 and 33% respectively) from their nominal capacity. Moreover, certain random noise are added to the input of voltage and current sensors present in the HESS structure. The responses are shown in Figs. 5 8. (Fig. 9) It can be observed from Figs. 5 8 that, the proposed controller is more robust against any variation in the SOC and the presence of measurement noise. This observation, confirms the efficacy of the proposed controller in presence of system uncertainties. As the PI controller is designed with a specific set of system parameters, it has to be tuned to achieve a satisfactory performance. Whereas, the proposed controller tune automatically against any variation in the nominal setup.The proposed system is able to respond instantaneously and able to supply the required current. When the load is suddenly changed, the super capacitor responds with in 2 micro seconds and battery started to ramp-up the current and super Fig. 3 Current waveforms with PI (Nominal) Fig. 4 Current waveforms with proposed controller Fig. 5 Bus voltage waveform comparison: change in SOC 4 IET Energy Syst. Integr. This is an open access article published by the IET and Tianjin University under the Creative Commons Attribution License (http://creativecommons.org/licenses/by/3.0/) 25168401, 2020, 3, Downloaded from https://ietresearch.onlinelibrary.wiley.com/doi/10.1049/iet-esi.2020.0022, Wiley Online Library on [19/02/2023]. See the Terms and Conditions (https://onlinelibrary.wiley.com/terms-and-conditions) on Wiley Online Library for rules of use; OA articles are governed by the applicable Creative Commons License capacitor started to decrease with a ramp rate of 0.5 A/0.1 s and vice versa. The complete list of simulation parameters are shown in Appendix 4.2 Experimental results and analysis The proposed scheme has been validated by conducting various experiments on designed prototype and it's results are explored in this section. Some important technical specifications regarding the experimental setup is provided in the Appendix. Initially experiments has been conducted with conventional control scheme and later with the proposed scheme.The experiments have been conducted on a 48 V Li-ion battery with 12 V 500 F super- capacitor with a buck boost type dc-dc converter with voltage and current of 50 V and 20 A respectively. 4.2.1 System executed with the conventional PI controller: When the system is subjected to either sudden increment or sudden decrements in load, the super-capacitor instantly starts charging or discharging as shown in Fig. 10. When the load current suddenly reduced from 3 to 0 A, the super-capacitor starts charging and vice-versa while increase in load. All the observation haven been made in dotted lines of Fig. 10. The important drawback that one can see in this scheme is even-though the response is faster (able to respond in 6 micro seconds), the dc bus voltage could not be maintained. 4.2.2 System executed with the proposed control scheme: The system has been executed with the proposed scheme and its results are shown in Fig. 11. In this scheme, when the load suddenly drops from 3 to 0 A, the super-capacitor charges quickly, however when the load increases from 0 to 3 A, the battery current ramp up slowly and super-capacitor current ramp down slowly. With this approach the life of the battery can be enhanced significantly. Important to note that all the x-axis represents in this article are time axis with 1 s per division. Further, the system have been executed with the very frequent load changes (0 to 3 A to 0 A) and gradual load changes are shown in Fig. 12. Even-though system operates at random conditions, the super capacitor is able to attenuates the transient condition with in very less time of 1 micro seconds. Also, the proposed system have been executed with the various SOC of battery and super-capacitor (Fig. 13). The proposed control schemes also behaves very well for various SOC conditions as well. When the battery SOC is 80 percent and super capacitor SOC is 100 percent, the ramp time of the battery is 3 s. Where as, when the SOC of battery is still at 80 percent, the super capacitor SOC is 90 percent, the ramp time of super capacitor is 2 seconds. Hence, from this scenario one can concludes that, the system is getting adjusted its ramp time as per SOC of battery and super-capacitor. Hence, the proposed system can be an excellent additional technology especially to electrical vehicle battery systems. Discussion: From the above figures, it can be observed that PI controller is sometimes quicker in response. This is due to the fact that, it exploits the complete system knowledge, and therefore easily enforce any desired behavior. However, the PI controller's performance in presence of uncertainties like meas. noise, and SOS variation is not desirable (can be observed from Figs. 7 and 8). The battery current in those cases change abruptly, which may degrade it's lifetime. As the real world systems are not nominal, and always associated with model uncertainties, and environmental disturbances, a PI controller may not provide the best results. One can also compare the proposed techniques with a PID controller. However, one should be careful about the derivative part of the controller, which may amplify certain noise components in a setup. As, the paper intentionally tested the proposed controller against random noise, we have avoided the comparison with a PID controller (whose performance will be not satisfactory in such cases). 5 Conclusion This article proposed an adaptive tracking controller for the HESS system comprising an active combination of battery and super-capacitor. The controller is robust against various uncertainties like change in SOC, change in system parameters and measurement noise. Moreover, the controller is simple in structure Fig. 6 Bus voltage waveform comparison: with Meas. Noise Fig. 7 Current waveforms with change in SOC and Meas. noise (PI) Fig. 8 Current waveforms with change in SOC and Meas. noise (Proposed) Fig. 9 Experimental setup of the proposed system with battery and super capacitor IET Energy Syst. Integr. This is an open access article published by the IET and Tianjin University under the Creative Commons Attribution License (http://creativecommons.org/licenses/by/3.0/) 5 25168401, 2020, 3, Downloaded from https://ietresearch.onlinelibrary.wiley.com/doi/10.1049/iet-esi.2020.0022, Wiley Online Library on [19/02/2023]. See the Terms and Conditions (https://onlinelibrary.wiley.com/terms-and-conditions) on Wiley Online Library for rules of use; OA articles are governed by the applicable Creative Commons License and does not require intensive computations. The simulations and experiments shows the effectiveness of the proposed scheme. Therefore, the controller may be suitable for practical implementation. 6 References [1] Mesbahi, T., Rizoug, N., Bartholome s, P., et al.: Dynamic model of li-ion batteries incorporating electrothermal and ageing aspects for electric vehicle applications , IEEE Trans. Ind. Electron., 2018, 65, (2), pp. 1298 1305 [2] Xia, X., Zhao, X., Zeng, H., et al.: A novel design of hybrid energy storage system for electric vehicles , Chinese J. Electr. Eng., 2018, 4, (1), pp. 45 51 [3] Zhang, L., Wang, Z., Hu, X., et al.: A comparative study of equivalent circuit models of ultracapacitors for electric vehicles , J. Power Sources, 2015, 274, pp. 899 906 [4] Jing, W., Lai, C.H., Wong, S.H.W., et al.: Battery-supercapacitor hybrid energy storage system in standalone dc microgrids: areview , IET Renew. Power Gener., 2016, 11, (4), pp. 461 469 [5] Sreedhar, S., Siegel, J.B., Choi, S.: Topology comparison for 48v battery- supercapacitor hybrid energy storage system , IFAC-PapersOnLine, 2017, 50, (1), pp. 4733 4738 [6] Zhang, T., Ge, S.: Adaptive dynamic surface control of nonlinear systems with unknown dead zone in pure feedback form , Automatica, 2008, 44, (7), pp. 1895 1903 [7] Kollimalla, S.K., Mishra, M.K., Narasamma, N.L.: Design and analysis of novel control strategy for battery and supercapacitor storage system , IEEE Trans. Sustain. Energy, 2014, 5, (4), pp. 1137 1144 [8] Carter, R., Cruden, A.: Strategies for control of a battery/supercapacitor system in an electric vehicle . Int. Symp. on Power Electronics, electrical drives, automation and motion, 2008. speedam 2008, Ischia, Italy, 2008, pp. 727 732 [9] Chemali, E., McCurlie, L., Howey, B., et al.: Minimizing battery wear in a hybrid energy storage system using a linear quadratic regulator . Industrial Electronics Society, IECON 2015-41st Annual Conf. of the IEEE, Yokohama, Japan, 2015, pp. 003265 003270 [10] Nwesaty, W., Bratcu, A.I., Sename, O.: Mimo hinf control for power source coordination-application to energy management systems of electric vehicles . 19th IFAC World Congress (IFAC WC 2014), Le Cap, South Africa, 2014, p. 7 [11] Zhang, Y., Jiang, Z.: Control and small-signal analysis of battery and supercapacitor hybrid energy storage systems , Int. J. Power Electron., 2012, 4, (1), pp. 49 70 [12] Jung, H., Conficoni, C., Tilli, A., et al.: Modeling and control design for power systems driven by battery/supercapacitor hybrid energy storage devices . American Control Conf. (ACC), Washington, DC, USA, 2013, pp. 4283 4288 [13] Hredzak, B., Agelidis, V.G.: Direct current control of a battery-ultracapacitor power supply . IECON 2012-38th Annual Conf. on IEEE Industrial Electronics Society, Sydney, NSW 2052, Australia, 2012, pp. 4024 4028 [14] Hredzak, B., Agelidis, V.G., Jang, M.: A model predictive control system for a hybrid battery-ultracapacitor power source , IEEE Trans. Power Electron., 2014, 29, (3), pp. 1469 1479 [15] Ilchmann, A.: Non-identifier-based high-gain adaptive control , ser. Lecture Notes in Control and Information Sciences [16] Ashman, F.A.J., Ilchmann, A.: High-gain adaptive a-tracking for nonlinear systems , Automatica, 1997, 33, pp. 881 888 [17] Ilchmann, A., Ryan, E.: Universal ?-tracking for nonlinearly-perturbed systems in the presence of noise , Automatica, 1994, 30, (2), pp. 337 346 [18] Hackl, C.M.: Contributions to high-gain adaptive control in mechatronics . Ph.D. dissertation, Technische Universit t M nchen, 2012 [19] Khalil, H.: Nonlinear systems (Prentice Hall, Upper Saddle River, NJ, 2002, 3rd edn.) 7 Appendix Battery Specifications: Nominal Voltage- 24 V, Rated Capacity-42 Ah, SOC-50 percent initial, Battery Response Time- 3 Sec, Battery type- Lithium Ion Battery, Cur off Voltage- 18 V, Full charged Voltage- 27.9 V, Nominal Discharge current-18.26 A, Internal Resistance- 0.0057 Ohms, Capacity at nominal voltage- 37.98 V, Super Capacitor: Rated capacitance-58 F, Equivalent DC series resistance-0.0089 Ohms, Rated Voltage- 16 V, Initial Voltage- 16 V, Operating Temperature 25 degree, Permitivity of electrolyte material- 6.2e-10 F/M, Current prior to open circuit-10 A Some details related to experiment has been uploaded as extra data in excel format. Proof of Theorem 1: The proof for super-capacitor can be done following the similar arguments. Define eb = Ibat Ibr and a Lyapunov like function Vb = 1 2 b( eb(t) b) 2, when eb(t) b 0, when eb(t) < b . (13) Taking derivative of Vb along the trajectories of (6), one can derive: Fig. 10 System executed with the conventional PI control scheme Fig. 11 System executed with the proposed control scheme Fig. 12 System executed with very frequent load changes and gradual changes Fig. 13 System executed with varying SOC 6 IET Energy Syst. Integr. This is an open access article published by the IET and Tianjin University under the Creative Commons Attribution License (http://creativecommons.org/licenses/by/3.0/) 25168401, 2020, 3, Downloaded from https://ietresearch.onlinelibrary.wiley.com/doi/10.1049/iet-esi.2020.0022, Wiley Online Library on [19/02/2023]. See the Terms and Conditions (https://onlinelibrary.wiley.com/terms-and-conditions) on Wiley Online Library for rules of use; OA articles are governed by the applicable Creative Commons License V b = b eb(t) b eb(t) eb(t)e b(t), when eb(t) b 0, when eb(t) < b . (14) Denote, Dv(eb(t)) = b eb(t) b eb(t) eb(t), when eb(t) b 0, when eb(t) < b . (15) From (14), it can be derived that V b Dv(eb(t))e b(t) (16) Using Lipschitz inequality for f b( . ) and bounded-ness of gb( . ), it can be derived that V b Kbgb(Vout, b)Dv(eb(t))eb(t) + Dv(eb(t)) Lb eb(t) + Ibr + cf b + I br + max (cb1, cb2) b (17) where Lb is the Lipschitz constant and cf b = f b(0, Ibr, Vout, b) . After some simple manipulations, it can be written that V b K bDv(eb(t))eb(t) +Lb1 Dv(eb(t)) ( eb(t) + 1) V b K bK b + Lb1 Dv(eb(t)) ( eb(t) + 1), (18) where Lb1 = Lb eb(t) + Lb Ibr + cf b + I br + max(cb1, cb2) b , and K b = cb2Kb, when Kb < 0 cb1Kb, when Kb 0. It can be observed that, Dv(eb(t)) 1 b( Dv(eb(t)) eb(t)) 1 bK b(t) . Denoting Lb2 = Lb1 + (Lb1/ b), (18) can be written as V b K bK b(t) + Lb2K b(t) V b K b(t)(K b Lb2) . (19) Boundedness of Kb(t): The boundedness can be proved by contradiction. Let the signal Kb(t) is unbounded on a time interval [0, T). In view of (10), Kb(t) is non-decreasing and tn 0, t [tn, T):K b Lb2 ck1, (ck1 R +) It can be observed from (10) that (1/2)K b Vb. Hence, there exists a positive constant ck2 such that V b ck1K b(t) ck2Vb . (20) So for a unbounded Kb(t), Vb(t) is a decreasing function. By using Bellman-Gronwall Lemma [19] and arguments similar to [15, 18], it can be proved that this is a contradiction. Hence, Kb(t) is bounded in the L sense. Proof of boundedness of Ibat(t) and its convergence: Since Kb(t) is bounded, so is Vb(t) and eb(t). Therefore, the battery current Ibat(t) is bounded in L sense. The proof of convergence can be done using Lemma 2.1.7 of [15] (see ilchman book) or following a similar line of arguments mentioned in [16, 17]. From (19) V b K b(t) + (Lb2 K b + 1)K b(t) . (21) Hence, there exists a positive number Mb: Lb2 + K b Mb and a Lyapunov like function Wb(t) = Vb(t) (Mb + 1)Kb(t) (22) such that W b K b(t) 0. (23) Invoking the Lasalle's invariance principle, it can be proved that Wb(t) converges to zero. So eb(t) converges to a ultimate bound b. IET Energy Syst. Integr. This is an open access article published by the IET and Tianjin University under the Creative Commons Attribution License (http://creativecommons.org/licenses/by/3.0/) 7 25168401, 2020, 3, Downloaded from https://ietresearch.onlinelibrary.wiley.com/doi/10.1049/iet-esi.2020.0022, Wiley Online Library on [19/02/2023]. See the Terms and Conditions (https://onlinelibrary.wiley.com/terms-and-conditions) on Wiley Online Library for rules of use; OA articles are governed by the applicable Creative Commons License